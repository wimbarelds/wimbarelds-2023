function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_(Object(n),!0).forEach(function(r){U(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function U(e,t,n){return t=q(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q(e){var t=H(e,"string");return typeof t=="symbol"?t:String(t)}function H(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function O(e){return e._type==="span"&&"text"in e&&typeof e.text=="string"&&(typeof e.marks>"u"||Array.isArray(e.marks)&&e.marks.every(t=>typeof t=="string"))}function L(e){return typeof e._type=="string"&&e._type[0]!=="@"&&(!("markDefs"in e)||Array.isArray(e.markDefs)&&e.markDefs.every(t=>typeof t._key=="string"))&&"children"in e&&Array.isArray(e.children)&&e.children.every(t=>typeof t=="object"&&"_type"in t)}function D(e){return L(e)&&"listItem"in e&&typeof e.listItem=="string"&&(typeof e.level>"u"||typeof e.level=="number")}function B(e){return e._type==="@list"}function M(e){return e._type==="@span"}function A(e){return e._type==="@text"}const x=["strong","em","code","underline","strike-through"];function N(e,t,n){if(!O(e)||!e.marks)return[];if(!e.marks.length)return[];const r=e.marks.slice(),o={};return r.forEach(i=>{o[i]=1;for(let c=t+1;c<n.length;c++){const f=n[c];if(f&&O(f)&&Array.isArray(f.marks)&&f.marks.indexOf(i)!==-1)o[i]++;else break}}),r.sort((i,c)=>$(o,i,c))}function $(e,t,n){const r=e[t],o=e[n];if(r!==o)return o-r;const i=x.indexOf(t),c=x.indexOf(n);return i!==c?i-c:t.localeCompare(n)}function C(e){var t;const{children:n,markDefs:r=[]}=e;if(!n||!n.length)return[];const o=n.map(N),i={_type:"@span",children:[],markType:"<unknown>"};let c=[i];for(let f=0;f<n.length;f++){const d=n[f];if(!d)continue;const s=o[f]||[];let l=1;if(c.length>1)for(l;l<c.length;l++){const a=((t=c[l])==null?void 0:t.markKey)||"",p=s.indexOf(a);if(p===-1)break;s.splice(p,1)}c=c.slice(0,l);let u=c[c.length-1];if(u){for(const a of s){const p=r.find(m=>m._key===a),h=p?p._type:a,y={_type:"@span",_key:d._key,children:[],markDef:p,markType:h,markKey:a};u.children.push(y),c.push(y),u=y}if(O(d)){const a=d.text.split(`
`);for(let p=a.length;p-- >1;)a.splice(p,0,`
`);u.children=u.children.concat(a.map(p=>({_type:"@text",text:p})))}else u.children=u.children.concat(d)}}return i.children}function z(e,t){const n=[];let r;for(let o=0;o<e.length;o++){const i=e[o];if(i){if(!D(i)){n.push(i),r=void 0;continue}if(!r){r=w(i,o,t),n.push(r);continue}if(F(i,r)){r.children.push(i);continue}if((i.level||1)>r.level){const c=w(i,o,t);if(t==="html"){const f=r.children[r.children.length-1],d=P(P({},f),{},{children:[...f.children,c]});r.children[r.children.length-1]=d}else r.children.push(c);r=c;continue}if((i.level||1)<r.level){const c=n[n.length-1],f=c&&v(c,i);if(f){r=f,r.children.push(i);continue}r=w(i,o,t),n.push(r);continue}if(i.listItem!==r.listItem){const c=n[n.length-1],f=c&&v(c,{level:i.level||1});if(f&&f.listItem===i.listItem){r=f,r.children.push(i);continue}else{r=w(i,o,t),n.push(r);continue}}console.warn("Unknown state encountered for block",i),n.push(i)}}return n}function F(e,t){return(e.level||1)===t.level&&e.listItem===t.listItem}function w(e,t,n){return{_type:"@list",_key:"".concat(e._key||"".concat(t),"-parent"),mode:n,level:e.level||1,listItem:e.listItem,children:[e]}}function v(e,t){const n=t.level||1,r=t.listItem||"normal",o=typeof t.listItem=="string";if(B(e)&&(e.level||1)===n&&o&&(e.listItem||"normal")===r)return e;if(!("children"in e))return;const i=e.children[e.children.length-1];return i&&!O(i)?v(i,t):void 0}function E(e){let t="";return e.children.forEach(n=>{A(n)?t+=n.text:M(n)&&(t+=E(n))}),t}const R=["block","list","listItem","marks","types"],V=["listItem"],G=["_key"];function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?T(Object(n),!0).forEach(function(r){J(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function J(e,t,n){return t=Q(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Q(e){var t=X(e,"string");return typeof t=="symbol"?t:String(t)}function X(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function I(e,t){if(e==null)return{};var n=Y(e,t),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Y(e,t){if(e==null)return{};var n={},r=Object.keys(e),o,i;for(i=0;i<r.length;i++)o=r[i],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}const Z=["http","https","mailto","tel"],ee={"&":"amp","<":"lt",">":"gt",'"':"quot","'":"#x27"};function K(e){return e.replace(/[&<>"']/g,t=>"&".concat(ee[t],";"))}function te(e){const t=(e||"").trim(),n=t.charAt(0);if(n==="#"||n==="/")return!0;const r=t.indexOf(":");if(r===-1)return!0;const o=t.slice(0,r).toLowerCase();if(Z.indexOf(o)!==-1)return!0;const i=t.indexOf("?");if(i!==-1&&r>i)return!0;const c=t.indexOf("#");return c!==-1&&r>c}const ne=e=>{let{children:t,value:n}=e;const r=n?.href||"";return te(r)?'<a href="'.concat(K(r),'">').concat(t,"</a>"):t},re={em:e=>{let{children:t}=e;return"<em>".concat(t,"</em>")},strong:e=>{let{children:t}=e;return"<strong>".concat(t,"</strong>")},code:e=>{let{children:t}=e;return"<code>".concat(t,"</code>")},underline:e=>{let{children:t}=e;return'<span style="text-decoration:underline">'.concat(t,"</span>")},"strike-through":e=>{let{children:t}=e;return"<del>".concat(t,"</del>")},link:ne},ie={number:e=>{let{children:t}=e;return"<ol>".concat(t,"</ol>")},bullet:e=>{let{children:t}=e;return"<ul>".concat(t,"</ul>")}},oe=e=>{let{children:t}=e;return"<li>".concat(t,"</li>")},g=(e,t)=>"Unknown ".concat(e,", specify a component for it in the `components.").concat(t,"` option"),W=e=>g('block type "'.concat(e,'"'),"types"),ce=e=>g('mark type "'.concat(e,'"'),"marks"),le=e=>g('block style "'.concat(e,'"'),"block"),se=e=>g('list style "'.concat(e,'"'),"list"),ue=e=>g('list item style "'.concat(e,'"'),"listItem");function ae(e){console.warn(e)}const fe=e=>{let{value:t,isInline:n}=e;const r=W(t._type);return n?'<span style="display:none">'.concat(r,"</span>"):'<div style="display:none">'.concat(r,"</div>")},pe=e=>{let{markType:t,children:n}=e;return'<span class="unknown__pt__mark__'.concat(t,'">').concat(n,"</span>")},ye=e=>{let{children:t}=e;return"<p>".concat(t,"</p>")},de=e=>{let{children:t}=e;return"<ul>".concat(t,"</ul>")},he=e=>{let{children:t}=e;return"<li>".concat(t,"</li>")},me=()=>"<br/>",ke={normal:e=>{let{children:t}=e;return"<p>".concat(t,"</p>")},blockquote:e=>{let{children:t}=e;return"<blockquote>".concat(t,"</blockquote>")},h1:e=>{let{children:t}=e;return"<h1>".concat(t,"</h1>")},h2:e=>{let{children:t}=e;return"<h2>".concat(t,"</h2>")},h3:e=>{let{children:t}=e;return"<h3>".concat(t,"</h3>")},h4:e=>{let{children:t}=e;return"<h4>".concat(t,"</h4>")},h5:e=>{let{children:t}=e;return"<h5>".concat(t,"</h5>")},h6:e=>{let{children:t}=e;return"<h6>".concat(t,"</h6>")}},j={types:{},block:ke,marks:re,list:ie,listItem:oe,hardBreak:me,unknownType:fe,unknownMark:pe,unknownList:de,unknownListItem:he,unknownBlockStyle:ye};function be(e,t){const n=I(t,R);return k(k({},e),{},{block:b(e,t,"block"),list:b(e,t,"list"),listItem:b(e,t,"listItem"),marks:b(e,t,"marks"),types:b(e,t,"types")},n)}function b(e,t,n){const r=t[n],o=e[n];return typeof r=="function"||r&&typeof o=="function"?r:r?k(k({},o),r):o}function Oe(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{components:n,onMissingComponent:r=ae}=t,o=r||we,i=Array.isArray(e)?e:[e],c=z(i,"html"),f=n?be(j,n):j,d=ge(f,o);return c.map((l,u)=>d({node:l,index:u,isInline:!1,renderNode:d})).join("")}const ge=(e,t)=>{function n(s){const{node:l,index:u,isInline:a}=s;return B(l)?o(l,u):D(l)?r(l,u):M(l)?i(l):L(l)?c(l,u,a):A(l)?f(l):d(l,u,a)}function r(s,l){const u=S({node:s,index:l,isInline:!1,renderNode:n}),a=e.listItem,h=(typeof a=="function"?a:a[s.listItem])||e.unknownListItem;if(h===e.unknownListItem){const m=s.listItem||"bullet";t(ue(m),{type:m,nodeType:"listItemStyle"})}let y=u.children;if(s.style&&s.style!=="normal"){const m=I(s,V);y=n({node:m,index:l,isInline:!1,renderNode:n})}return h({value:s,index:l,isInline:!1,renderNode:n,children:y})}function o(s,l){const u=s.children.map((y,m)=>n({node:y._key?y:k(k({},y),{},{_key:"li-".concat(l,"-").concat(m)}),index:l,isInline:!1,renderNode:n})),a=e.list,h=(typeof a=="function"?a:a[s.listItem])||e.unknownList;if(h===e.unknownList){const y=s.listItem||"bullet";t(se(y),{nodeType:"listStyle",type:y})}return h({value:s,index:l,isInline:!1,renderNode:n,children:u.join("")})}function i(s){const{markDef:l,markType:u,markKey:a}=s,p=e.marks[u]||e.unknownMark,h=s.children.map((y,m)=>n({node:y,index:m,isInline:!0,renderNode:n}));return p===e.unknownMark&&t(ce(u),{nodeType:"mark",type:u}),p({text:E(s),value:l,markType:u,markKey:a,renderNode:n,children:h.join("")})}function c(s,l,u){const a=S({node:s,index:l,isInline:u,renderNode:n}),p=I(a,G),h=p.node.style||"normal",m=(typeof e.block=="function"?e.block:e.block[h])||e.unknownBlockStyle;return m===e.unknownBlockStyle&&t(le(h),{nodeType:"blockStyle",type:h}),m(k(k({},p),{},{value:p.node,renderNode:n}))}function f(s){if(s.text===`
`){const l=e.hardBreak;return l?l():`
`}return K(s.text)}function d(s,l,u){const a=e.types[s._type];return a||t(W(s._type),{nodeType:"block",type:s._type}),(a||e.unknownType)({value:s,isInline:u,index:l,renderNode:n})}return n};function S(e){const{node:t,index:n,isInline:r,renderNode:o}=e,c=C(t).map((f,d)=>o({node:f,isInline:!0,index:d,renderNode:o}));return{_key:t._key||"block-".concat(n),children:c.join(""),index:n,isInline:r,node:t}}function we(){}export{Oe as t};
